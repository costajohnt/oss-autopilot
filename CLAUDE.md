# OSS Autopilot - Claude Code Plugin

## IMPORTANT: If User Just Pasted This Repo URL

**Guide them through installation immediately. Don't wait for them to ask.**

Say: "I see you want to install OSS Autopilot! Let me help you set it up."

Then follow the steps below.

### Step 1: Check prerequisites

```bash
node --version  # Need 18+
gh auth status  # Need GitHub CLI authenticated
```

If `gh` is not installed or authenticated:
> "You'll need the GitHub CLI for this plugin. Install it from https://cli.github.com/ and run `gh auth login`."

### Step 2: Install the plugin (marketplace)

```
/plugin marketplace add costajohnt/oss-autopilot
/plugin install oss-autopilot
```

### Step 3: Restart and run setup

> "Great! The plugin is installed. Please restart Claude Code to load it, then run `/setup-oss` to configure your preferences."

After restart, `/oss` and `/setup-oss` commands will be available.

The CLI auto-builds on first run (requires Node.js 18+ and npm).

---

## For Developers: Project Overview

oss-autopilot is a **Claude Code plugin with a TypeScript CLI backend** for managing open source contributions.

### Architecture

```
┌─────────────────────────────────────────────┐
│  Plugin Layer (commands/, agents/)          │
│  - /oss and /setup-oss commands             │
│  - Specialized agents for PR tasks          │
│  - Claude formats output for users          │
├─────────────────────────────────────────────┤
│  TypeScript CLI (deterministic, fast)       │
│  - Syncs PR state from GitHub API           │
│  - --json flag for structured output        │
│  - Generates HTML dashboard                 │
├─────────────────────────────────────────────┤
│  Core Logic (src/core/)                     │
│  - state.ts, pr-monitor.ts, types.ts        │
│  - Unit tested with vitest                  │
└─────────────────────────────────────────────┘
```

### Why this architecture?

- **Reliability**: Deterministic TypeScript handles GitHub API and state
- **Speed**: CLI operations complete in seconds
- **Testability**: Core logic has unit tests
- **Transparency**: JSON output shows exactly what Claude receives

### File Structure

```
Plugin directory (wherever installed):
├── commands/                 # Plugin slash commands
├── agents/                   # Specialized agents
├── skills/                   # Contribution best practices
├── src/                      # TypeScript CLI source
└── dist/                     # Built on first run (gitignored)
    └── cli.bundle.cjs        # Bundled CLI (auto-generated by esbuild)

~/.oss-autopilot/                # User data (separate from plugin code)
├── state.json                # PR tracking state
├── backups/                  # Auto-backups of state
└── dashboard.html            # Visual dashboard
```

### CLI Usage

The plugin invokes the bundled CLI with `--json` for structured output:

```bash
# Commands use ${CLAUDE_PLUGIN_ROOT} to locate the bundle:
node "${CLAUDE_PLUGIN_ROOT}/dist/cli.bundle.cjs" daily --json
node "${CLAUDE_PLUGIN_ROOT}/dist/cli.bundle.cjs" status --json
node "${CLAUDE_PLUGIN_ROOT}/dist/cli.bundle.cjs" search 10 --json
```

### Development

```bash
npm install        # Install dev dependencies
npm test           # Run tests
npm run bundle     # Rebuild the CLI bundle (esbuild)
npm start -- daily # Run CLI via tsx (dev mode)
```

The CLI bundle is gitignored and built automatically on first run. During development, run `npm run bundle` to rebuild after source changes.

### Git Workflow (for contributors)

1. Fork and clone
2. Create feature branch: `git checkout -b feature/your-feature`
3. Make changes and test: `npm test`
4. **Bump version and update changelog** (see Versioning below)
5. Commit with conventional format: `feat:`, `fix:`, `refactor:`
6. Push and open PR

**Important:**
- Do NOT push directly to main
- Keep PRs focused and atomic
- Run tests before submitting

### Versioning

**Every PR must include a version bump and changelog entry.**

- Bump the version in **both** `.claude-plugin/plugin.json` and `package.json` (they must always match)
- Follow [semver](https://semver.org/): bug fix = patch, new feature = minor
- Add a new section to `CHANGELOG.md` with the bumped version and a description of your changes (use `Added`, `Changed`, `Fixed` headings)
- Add a comparison link at the bottom of `CHANGELOG.md` for the new version

**AI Attribution Rule (CRITICAL):**
NEVER add AI attribution to commits, comments, PRs, or any content submitted to external repositories unless explicitly required by that repo's contribution guidelines. This includes:
- No "Co-Authored-By: Claude" in commit messages
- No "Generated with Claude Code" in PR descriptions
- No robot emoji attributions
- No mentions of AI assistance in comments
Contributions should appear as solely from the user.
